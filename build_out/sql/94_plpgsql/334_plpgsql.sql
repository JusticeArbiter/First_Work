create function trap_matching_test(int) returns int as $$  declare x int;  sx smallint;  y int;  begin  begin -- start a subtransaction  x := 100 / $1;  sx := $1;  select into y unique1 from tenk1 where unique2 =  (select unique2 from tenk1 b where ten = $1);  exception  when data_exception then -- category match  raise notice 'caught data_exception';  x := -1;  when NUMERIC_VALUE_OUT_OF_RANGE OR CARDINALITY_VIOLATION then  raise notice 'caught numeric_value_out_of_range or cardinality_violation';  x := -2;  end;  return x;  end$$ language plpgsql;
