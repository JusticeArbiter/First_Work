INSERT INTO upsert_test VALUES (1, 'Baz') ON CONFLICT(a)  DO UPDATE SET (b, a) = (SELECT b || ', Correlated', a from upsert_test i WHERE i.a = upsert_test.a) RETURNING *;
 a |        b        
---+-----------------
 1 | Foo, Correlated
(1 row)

INSERT 0 1
