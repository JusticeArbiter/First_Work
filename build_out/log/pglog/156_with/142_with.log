LOG:  00000: statement: WITH simpletup AS (  SELECT 2 k, 'Green' v),  upsert_cte AS (  INSERT INTO z VALUES(2, 'Blue') ON CONFLICT (k) DO  UPDATE SET (k, v) = (SELECT k, v FROM simpletup WHERE simpletup.k = z.k)  RETURNING k, v)  INSERT INTO z VALUES(2, 'Red') ON CONFLICT (k) DO  UPDATE SET (k, v) = (SELECT k, v FROM upsert_cte WHERE upsert_cte.k = z.k)  RETURNING k, v;
LOCATION:  exec_simple_query, postgres.c:938
ERROR:  21000: ON CONFLICT DO UPDATE command cannot affect row a second time
HINT:  Ensure that no rows proposed for insertion within the same command have duplicate constrained values.
LOCATION:  ExecOnConflictUpdate, nodeModifyTable.c:1119
STATEMENT:  WITH simpletup AS (  SELECT 2 k, 'Green' v),  upsert_cte AS (  INSERT INTO z VALUES(2, 'Blue') ON CONFLICT (k) DO  UPDATE SET (k, v) = (SELECT k, v FROM simpletup WHERE simpletup.k = z.k)  RETURNING k, v)  INSERT INTO z VALUES(2, 'Red') ON CONFLICT (k) DO  UPDATE SET (k, v) = (SELECT k, v FROM upsert_cte WHERE upsert_cte.k = z.k)  RETURNING k, v;
