create function trap_timeout() returns void as $$  begin  declare x int;  begin  -- we assume this will take longer than 2 seconds:  select count(*) into x from tenk1 a, tenk1 b, tenk1 c;  exception  when others then  raise notice 'caught others?';  when query_canceled then  raise notice 'nyeah nyeah, can''t stop me';  end;  -- Abort transaction to abandon the statement_timeout setting. Otherwise,  -- the next top-level statement would be vulnerable to the timeout.  raise exception 'end of function';  end$$ language plpgsql;
